<!doctype html>
<html class="no-js" lang="zxx">

<head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Shop Four Column || nelson</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Place favicon.ico in the root directory -->
    <link href="assets/images/favicon.ico" type="img/x-icon" rel="shortcut icon">
    <!-- All css files are included here. -->
    <link rel="stylesheet" href="assets/css/vendor/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/vendor/iconfont.min.css">
    <link rel="stylesheet" href="assets/css/vendor/helper.css">
    <link rel="stylesheet" href="assets/css/plugins/plugins.css">
    <link rel="stylesheet" href="assets/css/style.css">
    <!-- Modernizr JS -->
    <script src="assets/js/vendor/modernizr-2.8.3.min.js"></script>
</head>

<body>

    <div id="main-wrapper">

        <div id="main-wrapper">
            <!--Header section start-->
            <header class="header header-transparent header-sticky  d-lg-block d-none">
                <div class="header-deafult-area">
                    <div class="container">
                        <div class="row align-items-center">
                            <div class="col-xl-3 col-lg-2 col-md-4 col-12">
                                <!--Logo Area Start-->
                                <div class="logo-area">
                                    <a href="index.html"><img src="./assets/images/logo.png" alt=""></a>
                                </div>
                                <!--Logo Area End-->
                            </div>
                            <div class="col-xl-6 col-lg-6 col-md-4 d-none d-lg-block col-12">
                                <!--Header Menu Area Start-->
                                <div class="header-menu-area text-center">
                                    <nav class="main-menu">
                                        <ul>
                                            <li><a href="index.html">Home</a></li>
                                            <li><a href="shop.html">Shop</a></li>
                                        </ul>
                                    </nav>
                                </div>
                                <!--Header Menu Area End-->
                            </div>
                            <div class="col-xl-3 col-lg-4 col-md-5 col-12">
                                <!--Header Search And Mini Cart Area Start-->
                                <div class="header-search-cart-area">
                                    <ul>
                                        <!-- <li><a class="header-search-toggle" href="#"><i
                                                    class="flaticon-magnifying-glass"></i></a></li> -->
                                        <li class="currency-menu"><a href="my-account.html">
                                                <img style="border-radius: 50%; min-width: 45px; height: 45px;" src="./assets/images/avatarMaria.png" alt="avatar">
                                        </a></li>
                                        <li class="currency-menu"><a href="my-account.html" style="font-size: 12px; line-height: 12px; margin-right: 15px; width: 100%;">
                                            MARIA RIOS DELGADO
                                    </a></li>
                                    </ul>
                                </div>
                                <!--Header Search And Mini Cart Area End-->
                            </div>
                        </div>
                    </div>
                </div>
            </header>
            <!--Header section end-->

            <!--Header Mobile section start-->
            <header class="header-mobile d-block d-lg-none">
                <div class="header-bottom menu-right">
                    <div class="container">
                        <div class="row">
                            <div class="col-12">
                                <div class="header-mobile-navigation d-block d-lg-none">
                                    <div class="row align-items-center">
                                        <div class="col-6 col-md-6">
                                            <div class="header-logo">
                                                <a href="index.html">
                                                    <img src="./assets/images/logo.png" class="img-fluid" alt="">
                                                </a>
                                            </div>
                                        </div>
                                        <div class="col-6 col-md-6">
                                            <div class="mobile-navigation text-end">
                                                <div class="header-icon-wrapper">
                                                    <ul class="icon-list justify-content-end">
                                                        <li>
                                                            <a href="javascript:void(0)" class="mobile-menu-icon"
                                                                id="mobile-menu-trigger"><i class="fa fa-bars"></i></a>
                                                        </li>
                                                    </ul>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!--Mobile Menu start-->
                        <div class="row">
                            <div class="col-12 d-flex d-lg-none">
                                <div class="mobile-menu"></div>
                            </div>
                        </div>
                        <!--Mobile Menu end-->

                    </div>
                </div>
            </header>
            <!--Header Mobile section end-->

               <!-- main-search start -->
    <div class="main-search-custom">
        
        <div class="input-custom">
            <form action="#" id="search-form-text">
                <div class="form-search-custom" style="display: flex;">
                    <input id="search-by-text" class="input-text" value="" placeholder="BUSCA UN ARTÍCULO, COLOR, COLECCIÓN..." type="search">
                    <!-- <button class="button-search-custom">
                        <i class="fa fa-search"></i>
                    </button> -->
                </div>
            </form>          
            <button class="upload-image-button"> <i class="fa fa-camera" style="margin-right: 5px;"></i> UPLOAD IMAGE</button>
        </div>
    </div>
    <!-- main-search start -->

            <!-- Offcanvas Menu Start -->
            <div class="upload-section">
                <a class="close-upload" href="javascript:void(0)">
                    <i class="fa fa-times"></i>
                </a>

                <div class="form-position">
                    <form id="search-form" enctype="multipart/form-data">
                            <div id="drop-area" class="upload-section-box">
                                <div class="upload-fixed">
                                <i class="fa fa-image" style="font-size: 80px; margin-right: 30px;"></i>
                                Arrastra una imagen o
                                <label for="image-input" class="custom-file-upload" style="margin-left: 4px;">
                                    selecciona un archivo
                                </label>
                                <input type="file" id="image-input" accept="image/*" onchange="showPreview(event);">
                            </div>
                            <div class="preview">
                                <img id="file-ip-1-preview"></img>
                            </div>
                        </div>
                            <button type="submit" class="upload-button">SUBIR</button>
                        </form>
                    </div>
                </div>


        </div>
        <!-- Offcanvas Menu End -->

    <!-- main-search start -->
<div id="caption-container"></div>
    <div class="row">
        <div class="col-lg-12">
            <div class="row">
                <div class="col-12">
                    <div class="shop-product">
                        <div id="myTabContent-2" class="tab-content">
                            <div id="grid" class="tab-pane fade active show">
                                <div class="product-grid-view" id="product-container" >
                                    <div class="row">
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!--Footer section start-->
    <footer class="footer-section section bg-gray">

        <!--Footer Top start-->
        <div
            class="footer-top section pt-100 pt-lg-80 pt-md-70 pt-sm-60 pt-xs-50 pb-55 pb-lg-35 pb-md-25 pb-sm-15 pb-xs-10">
            <div class="container">
                <div class="row">

                    <!--Footer Widget start-->
                    <div class="footer-widget col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12 mb-40 mb-xs-35">
                        <h4 class="title"><span class="text">Opening Time</span></h4>
                        <p class="mb-15">Mon – Fri: 8AM – 10PM</p>
                        <p class="mb-15">Sat: 9AM-8PM</p>
                        <p class="mb-15">Sun: Closed</p>
                        <h4 class="opeaning-title">We Work All The Holidays</h4>
                    </div>
                    <!--Footer Widget end-->


                    <!--Footer Widget start-->
                    <div class="footer-widget col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12 mb-40 mb-xs-35">
                        <h4 class="title"><span class="text">Quick Link</span></h4>
                        <ul class="ft-menu">
                            <li><a href="#">My account</a></li>
                            <li><a href="#">Wishlist</a></li>
                            <li><a href="#">Order Tracking</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Shipping Information</a></li>
                        </ul>
                    </div>
                    <!--Footer Widget end-->

                    <!--Footer Widget start-->
                    <div class="footer-widget col-xl-3 col-lg-3 col-md-6 col-sm-6 col-12 mb-40 mb-xs-35">
                        <h4 class="title"><span class="text">Information</span></h4>
                        <ul class="ft-menu">
                            <li><a href="#">About Us</a></li>
                            <li><a href="#">Shopping Guide</a></li>
                            <li><a href="#">Delivery Information</a></li>
                            <li><a href="#">Privacy Policy</a></li>
                            <li><a href="#">Our Store</a></li>
                        </ul>
                    </div>
                    <!--Footer Widget end-->


                </div>
            </div>
        </div>
        <!--Footer Top end-->
        <!-- Modal Area Strat -->
        <div class="modal fade quick-view-modal-container" id="quick-view-modal-container" tabindex="-1" role="dialog"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="col-xl-12 col-lg-12">
                            <div class="row">
                                <div class="col-lg-4 col-md-6">
                                    <!-- Product Details Left -->
                                    <div class="product-details-left">
                                        <div class="product-details-images">
                                            <div class="lg-image">
                                                <img src="./assets/images/product/large-product/l-product-1.jpg" alt="">
                                            </div>
                                            <div class="lg-image">
                                                <img src="./assets/images/product/large-product/l-product-2.jpg" alt="">
                                            </div>
                                            <div class="lg-image">
                                                <img src="./assets/images/product/large-product/l-product-3.jpg" alt="">
                                            </div>
                                            <div class="lg-image">
                                                <img src="./assets/images/product/large-product/l-product-4.jpg" alt="">
                                            </div>
                                            <div class="lg-image">
                                                <img src="./assets/images/product/large-product/l-product-5.jpg" alt="">
                                            </div>
                                        </div>
                                        <div class="product-details-thumbs">
                                            <div class="sm-image"><img
                                                    src="./assets/images/product/small-product/s-product-1.jpg"
                                                    alt="product image thumb"></div>
                                            <div class="sm-image"><img
                                                    src="./assets/images/product/small-product/s-product-2.jpg"
                                                    alt="product image thumb"></div>
                                            <div class="sm-image"><img
                                                    src="./assets/images/product/small-product/s-product-3.jpg"
                                                    alt="product image thumb"></div>
                                            <div class="sm-image"><img
                                                    src="./assets/images/product/small-product/s-product-4.jpg"
                                                    alt="product image thumb"></div>
                                            <div class="sm-image"><img
                                                    src="./assets/images/product/small-product/s-product-5.jpg"
                                                    alt="product image thumb"></div>
                                        </div>
                                    </div>
                                    <!--Product Details Left -->
                                </div>
                                <div class="col-lg-8 col-md-6">
                                    <!--Product Details Content Start-->
                                    <div class="product-details-content">
                                        <!--Product Nav Start-->
                                        <div class="product-nav">
                                            <a href="#"><i class="fa fa-angle-left"></i></a>
                                            <a href="#"><i class="fa fa-angle-right"></i></a>
                                        </div>
                                        <!--Product Nav End-->
                                        <h2>Aliquam lobortis est turpis mauris egestas eget</h2>
                                        <div class="single-product-reviews">
                                            <i class="fa fa-star active"></i>
                                            <i class="fa fa-star active"></i>
                                            <i class="fa fa-star active"></i>
                                            <i class="fa fa-star active"></i>
                                            <i class="fa fa-star-o"></i>
                                            <a class="review-link" href="#">(1 customer review)</a>
                                        </div>
                                        <div class="single-product-price">
                                            <span class="price new-price">$66.00</span>
                                            <span class="regular-price">$77.00</span>
                                        </div>
                                        <div class="product-description">
                                            <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do
                                                eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut
                                                enim ad minim veniam, quis nostrud exercitation ullamco,Proin
                                                lectus ipsum, gravida et mattis vulputate, tristique ut lectus
                                            </p>
                                        </div>
                                        <div class="single-product-quantity">
                                            <form class="add-quantity" action="#">
                                                <div class="product-quantity">
                                                    <input value="1" type="number">
                                                </div>
                                                <div class="add-to-link">
                                                    <button class="btn"><i class="ion-bag"></i>add to
                                                        cart</button>
                                                </div>
                                            </form>
                                        </div>
                                        <div class="wishlist-compare-btn">
                                            <a href="#" class="wishlist-btn">Add to Wishlist</a>
                                            <a href="#" class="add-compare">Compare</a>
                                        </div>
                                        <div class="product-meta">
                                            <span class="posted-in">
                                                Categories:
                                                <a href="#">Accessories</a>,
                                                <a href="#">Electronics</a>
                                            </span>
                                        </div>
                                        <div class="single-product-sharing">
                                            <h3>Share this product</h3>
                                            <ul>
                                                <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                                                <li><a href="#"><i class="fa fa-facebook"></i></a></li>
                                                <li><a href="#"><i class="fa fa-google-plus"></i></a></li>
                                                <li><a href="#"><i class="fa fa-pinterest"></i></a></li>
                                                <li><a href="#"><i class="fa fa-instagram"></i></a></li>
                                                <li><a href="#"><i class="fa fa-vimeo"></i></a></li>
                                            </ul>
                                        </div>
                                    </div>
                                    <!--Product Details Content End-->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
        <!-- Modal Area End -->
        </div>




        <!-- All jquery file included here -->
        <script src="assets/js/vendor/jquery-1.12.4.min.js"></script>
        <script
            src="https://maps.google.com/maps/api/js?sensor=false&libraries=geometry&v=3.22&key=AIzaSyDAq7MrCR1A2qIShmjbtLHSKjcEIEBEEwM"></script>
        <script src="assets/js/vendor/bootstrap.min.js"></script>
        <script src="assets/js/plugins/plugins.js"></script>
        <script src="assets/js/main.js"></script>

        <!-- Placed js at the end of the document so the pages load faster -->

        <script>

                const imageInput = document.getElementById('image-input');
                let dropArea = document.getElementById("drop-area");

                // const imageInput = document.getElementById('image-input');
                function showPreview(event){
                if(imageInput.files.length > 0){
                    var src = URL.createObjectURL(imageInput.files[0]);
                    var preview = document.getElementById("file-ip-1-preview");
                    preview.src = src;
                    preview.style.display = "block";
                }
                }

            document.addEventListener('DOMContentLoaded', () => {

                const searchForm = document.getElementById('search-form');
                

                searchForm.addEventListener('submit', function (event) {
                    event.preventDefault(); 
                    const imageInput = document.getElementById('image-input');

                    if (imageInput.files.length > 0) {
                        const formData = new FormData();
                        formData.append('file', imageInput.files[0]);
                        
                        searchProductsByImage(formData);
                    } 
                     else {
                        console.log('Please select an image to search.');
                    }
                });

                const searchFormText = document.getElementById('search-form-text');
                searchFormText.addEventListener('submit', function (event) {
                    event.preventDefault(); 
                    const inputValue = document.getElementById('search-by-text').value;

                    if (inputValue != null || inputValue != undefined) {
                        searchProductsByText(inputValue)
                    }
                     else {
                        console.log('Please select an item to search.');
                    }
                });
                


                const searchProductsByImage = async (formData) => {
                    try {
                        const response = await fetch('http://localhost:5050/imgsearch', {

                            method: 'POST',
                            body: formData

                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json();

                        displayProducts(data);

                    } catch (error) {
                        console.error('There was an error with the image search:', error);
                    }
                };

                const searchProductsByText = async (input) => {
                    try {
                        const response = await fetch('http://localhost:5050/textsearch', {

                            method: 'POST',
                            headers: {
                                'Accept': 'application/json',
                                'Content-Type': 'application/json'
                            },
                            body: JSON.stringify({"input": input})

                        });

                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }

                        const data = await response.json();
                        displayProducts(data);

                    } catch (error) {
                        console.error('There was an error with the text search:', error);
                    }
                };

                const displayProducts = (products) => {

                    const rowContainer = document.querySelector('.product-grid-view .row'); 


                    rowContainer.innerHTML = '';

                    const captionContain = document.querySelector('#caption-container');
                    captionContain.innerHTML = '';

                    const descriptionDiv = document.createElement('div');
                    descriptionDiv.innerHTML= `<div style="margin-left: 20px; ">${products.caption}</div>`;
                    captionContain.appendChild(descriptionDiv);

                    
                    products.result.forEach((product) => {

                        const productDiv = document.createElement('div');
                        productDiv.classList.add('col-lg-3', 'col-md-6', 'col-sm-6');

                        productDiv.innerHTML = `
                        <div id="products-show" class="single-grid-product mb-40" >
                            <div class="product-image">
                                <a href="single-product.html">
                                    <img src="${product.image_url}" class="img-fluid" alt="${product.description}">
                                </a>
                            </div>
                            <div class="product-content">
                                <h3 class="title"><a href="single-product.html">${product.name}</a></h3>
                            </div>
                        </div>
                    `;
                    setTimeout(function(){
                    // Añade el div del producto al contenedor de la fila
                    rowContainer.appendChild(productDiv);
                    },5000);
                    });
                };
            });
        </script>

<script>
    window.watsonAssistantChatOptions = {
      integrationID: "c8f27f29-e92b-4040-bd76-87ee6a5593e1", // The ID of this integration.
      region: "eu-de", // The region your integration is hosted in.
      serviceInstanceID: "f3b3a9e6-f119-4875-9153-e7dd17c67788", // The ID of your service instance.
      onLoad: async (instance) => { await instance.render(); }
    };
    setTimeout(function(){
      const t=document.createElement('script');
      t.src="https://web-chat.global.assistant.watson.appdomain.cloud/versions/" + (window.watsonAssistantChatOptions.clientVersion || 'latest') + "/WatsonAssistantChatEntry.js";
      document.head.appendChild(t);
    });
  </script>

</body>

</html>